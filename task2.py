import re
from typing import Callable


def generator_numbers(text: str):
    """
    Генератор, який ідентифікує та повертає всі дійсні числа у тексті.
    
    Числа повинні бути чітко відокремлені пробілами з обох боків.
    
    Args:
        text (str): Вхідний текст для аналізу
        
    Yields:
        float: Дійсне число, знайдене у тексті
    """
    # Регулярний вираз для пошуку дійсних чисел, відокремлених пробілами
    # (?<=\s) - позитивний lookbehind: перевіряє, що перед числом є пробіл
    # \d+\.?\d* - саме число (цифри, опціональна крапка, опціональні цифри)
    # (?=\s) - позитивний lookahead: перевіряє, що після числа є пробіл
    # Lookbehind та lookahead не "споживають" символи, тому збіги можуть йти підряд
    pattern = r'(?<=\s)\d+\.?\d*(?=\s)'
    
    # Додаємо пробіли на початку та в кінці тексту для коректної обробки
    # чисел на початку та в кінці рядка
    normalized_text = f" {text} "
    
    # Знаходимо всі збіги у тексті
    matches = re.finditer(pattern, normalized_text)
    
    # Повертаємо кожне знайдене число як float
    for match in matches:
        yield float(match.group(0))


def sum_profit(text: str, func: Callable) -> float:
    """
    Обчислює загальну суму чисел у тексті, використовуючи генератор.
    
    Args:
        text (str): Вхідний текст для аналізу
        func (Callable): Функція-генератор для отримання чисел з тексту
        
    Returns:
        float: Загальна сума всіх чисел у тексті
    """
    # Використовуємо генератор для отримання всіх чисел та підсумовуємо їх
    return sum(func(text))


# Приклад використання
if __name__ == "__main__":
    text = "Загальний дохід працівника складається з декількох частин: 1000.01 як основний дохід, доповнений додатковими надходженнями 27.45 і 324.00 доларів."
    
    # Виводимо всі знайдені числа
    print("Знайдені числа:")
    for number in generator_numbers(text):
        print(f"  {number}")
    
    # Обчислюємо та виводимо загальний дохід
    total_income = sum_profit(text, generator_numbers)
    print(f"\nЗагальний дохід: {total_income}")

